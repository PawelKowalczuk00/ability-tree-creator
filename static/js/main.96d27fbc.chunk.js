(this["webpackJsonpability-tree-creator"]=this["webpackJsonpability-tree-creator"]||[]).push([[0],{31:function(e,t,r){},33:function(e,t,r){e.exports=r.p+"static/media/logo.a2770e0b.png"},37:function(e,t,r){e.exports=r(73)},42:function(e,t,r){},48:function(e,t,r){},67:function(e,t,r){},70:function(e,t,r){},71:function(e,t,r){},72:function(e,t,r){},73:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"login",(function(){return T})),r.d(n,"register",(function(){return W}));var a={};r.r(a),r.d(a,"show",(function(){return z})),r.d(a,"hide",(function(){return F}));var o={};r.r(o),r.d(o,"getList",(function(){return K})),r.d(o,"getOne",(function(){return $})),r.d(o,"addOne",(function(){return G})),r.d(o,"expose",(function(){return Q}));var c={};r.r(c),r.d(c,"error",(function(){return a})),r.d(c,"userDetails",(function(){return n})),r.d(c,"heroes",(function(){return o}));var l=r(0),u=r.n(l),s=r(32),i=r.n(s),m=r(10);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var p,d,f,h,b,E,v,g,w,O,y,j,x,k,N=r(14),S=r(15),C=r(17),I=r(16),D=r(2),L=(r(42),r(33)),M=r.n(L),U=function(e){Object(C.a)(r,e);var t=Object(I.a)(r);function r(){return Object(N.a)(this,r),t.apply(this,arguments)}return Object(S.a)(r,[{key:"render",value:function(){return u.a.createElement("nav",null,u.a.createElement("div",null,u.a.createElement(m.b,{to:"/ability-tree-creator"},u.a.createElement("img",{className:"logo",src:M.a,alt:"D I A B L O"}))),u.a.createElement("div",{className:"account"},u.a.createElement(m.b,{to:"/ability-tree-creator/login"},"Login")))}}]),r}(u.a.Component),q=(r(48),function(){return u.a.createElement("footer",null,u.a.createElement("div",{className:"white-opacity"},"Pawe\u0142 Kowaclzuk 2020 | version: 1.0.0"))}),R=r(3),_=r(36),B=r(1),H=r.n(B),P=r(5),A=r(35),J=r.n(A).a.create({baseURL:"https://ability-tree-api-pk2020.herokuapp.com/api",headers:{"Content-Type":"application/json"}}),T=function(){var e=Object(P.a)(H.a.mark((function e(t,r){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J.post("/login",r).then((function(e){var n=e.headers["x-auth-token"];return localStorage.setItem("token",n),localStorage.setItem("email",r.email),t.setState({token:n}),e.status})).catch((function(e){console.error(e),e.response?t.actions.error.show("Could not login. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server.")})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),W=function(){var e=Object(P.a)(H.a.mark((function e(t,r){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J.post("/register",r).then(function(){var e=Object(P.a)(H.a.mark((function e(n){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,r);case 2:return e.abrupt("return",n.status);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),e.response?t.actions.error.show("Could not register. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server.")})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),z=function(e,t){e.setState({error:{display:"block",message:t}})},F=function(e){e.setState({error:{display:"none",message:void 0}})},K=function(){var e=Object(P.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J.get("/heroes",{headers:{"x-auth-token":localStorage.getItem("token")}}).then((function(e){return e})).catch((function(e){return console.error(e),e.response?t.actions.error.show("Could not get list of heroes. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server."),e.response})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(P.a)(H.a.mark((function e(t,r){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J.get("/heroes/".concat(r),{headers:{"x-auth-token":localStorage.getItem("token")}}).then(function(){var e=Object(P.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),e.response?t.actions.error.show("Could not get a hero. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server.")})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),G=function(){var e=Object(P.a)(H.a.mark((function e(t,r){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J.post("/heroes",r,{headers:{"x-auth-token":localStorage.getItem("token")}}).then(function(){var e=Object(P.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),e.response?t.actions.error.show("Could not get a hero. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server.")})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Q=function(e,t){e.setState({exposedHero:t._id})},V={token:void 0,error:{display:"none",message:void 0},exposedHero:{name:"",_id:void 0}},X=Object(_.a)(u.a,V,c),Y=(r(67),function(){var e=X(),t=Object(R.a)(e,2),r=t[0],n=t[1],a={display:r.error.display};return u.a.createElement("div",{className:"error",style:a},u.a.createElement("p",null,r.error.message),u.a.createElement("br",null),u.a.createElement("button",{onClick:n.error.hide},"Hide"))}),Z=r(11),ee=(r(70),function(){return u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"box upper box1"}),u.a.createElement("div",{className:"box upper box2"}),u.a.createElement("div",{className:"box bottom box3"}),u.a.createElement("div",{className:"box bottom box4"}))}),te=(r(31),!1),re=!1,ne=function(){var e=Object(l.useState)(),t=Object(R.a)(e,2);p=t[0],d=t[1];var r=Object(l.useState)(),n=Object(R.a)(r,2);f=n[0],h=n[1];var a=Object(Z.useStateIfMounted)(),o=Object(R.a)(a,2);te=o[0],b=o[1];var c=Object(Z.useStateIfMounted)(),s=Object(R.a)(c,2);re=s[0],E=s[1];var i=X(),g=Object(R.a)(i,2);return g[0],v=g[1],te?u.a.createElement("div",null,u.a.createElement(D.a,{to:"/ability-tree-creator/".concat(te)})):re?u.a.createElement("div",{className:"content"},u.a.createElement(ee,null)):u.a.createElement("div",{className:"content"},u.a.createElement("h2",{className:"row"},"Login"),u.a.createElement("form",{className:"row",onSubmit:ae},u.a.createElement("label",{className:"row"},"Email: ",u.a.createElement("br",null),u.a.createElement("input",{type:"email",placeholder:"example@xd.com",onChange:function(e){return d(e.target.value)}})),u.a.createElement("label",{className:"row"},"Password: ",u.a.createElement("br",null),u.a.createElement("input",{type:"password",placeholder:"********",onChange:function(e){return h(e.target.value)}})),u.a.createElement("input",{type:"submit",value:"Login"})),u.a.createElement(m.b,{to:"/ability-tree-creator/register",className:"row"},u.a.createElement("div",null,"Register instead")))},ae=function(){var e=Object(P.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),E(!0),v.userDetails.login({email:p,password:f}).then((function(e){e>=200&&e<300&&b("/ability-tree-creator")})).finally((function(){E(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=!1,ce=!1,le=function(){var e=Object(l.useState)(),t=Object(R.a)(e,2);g=t[0],w=t[1];var r=Object(l.useState)(),n=Object(R.a)(r,2);O=n[0],y=n[1];var a=Object(Z.useStateIfMounted)(),o=Object(R.a)(a,2);oe=o[0],j=o[1];var c=Object(Z.useStateIfMounted)(),s=Object(R.a)(c,2);ce=s[0],x=s[1];var i=X(),p=Object(R.a)(i,2);return p[0],k=p[1],oe?u.a.createElement("div",null,u.a.createElement(D.a,{to:"/ability-tree-creator/".concat(oe)})):ce?u.a.createElement("div",{className:"content"},u.a.createElement(ee,null)):u.a.createElement("div",{className:"content"},u.a.createElement("h2",{className:"row"},"Register"),u.a.createElement("form",{className:"row",onSubmit:ue},u.a.createElement("label",{className:"row"},"Email: ",u.a.createElement("br",null),u.a.createElement("input",{type:"email",placeholder:"example@xd.com",onChange:function(e){return w(e.target.value)}})),u.a.createElement("label",{className:"row"},"Password: ",u.a.createElement("br",null),u.a.createElement("input",{type:"password",placeholder:"********",onChange:function(e){return y(e.target.value)}})),u.a.createElement("input",{type:"submit",value:"Register"})),u.a.createElement(m.b,{to:"/ability-tree-creator/login",className:"row"},u.a.createElement("div",null,"Login instead")))},ue=function(e){e.preventDefault(),x(!0),k.userDetails.register({email:g,password:O}).then((function(e){e>=200&&e<300&&j("/ability-tree-creator")})).finally((function(){x(!1)}))},se=(r(71),function(){var e=Object(Z.useStateIfMounted)(!1),t=Object(R.a)(e,2),r=t[0],n=t[1],a=Object(Z.useStateIfMounted)(!1),o=Object(R.a)(a,2),c=o[0],s=o[1],i=Object(l.useState)([]),m=Object(R.a)(i,2),p=m[0],d=m[1],f=Object(l.useState)(),h=Object(R.a)(f,2),b=h[0],E=h[1],v=X(),g=Object(R.a)(v,2),w=(g[0],g[1]),O=function(){var e=Object(P.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,w.heroes.getList();case 3:if(401!==(null===(t=e.sent)||void 0===t?void 0:t.status)){e.next=8;break}return e.abrupt("return",n("login"));case 8:(null===t||void 0===t?void 0:t.status)<300&&d(t.data);case 9:s(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){O()}),[]);return u.a.createElement("div",{className:"heroes"},u.a.createElement("table",null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Number"),u.a.createElement("th",null,"Name"),u.a.createElement("th",null,"Creator"),u.a.createElement("th",null,"Creation date"),u.a.createElement("th",null,"Trees"))),u.a.createElement("tbody",null,r?u.a.createElement("tr",null,u.a.createElement(D.a,{to:"/ability-tree-creator/".concat(r)})):c?u.a.createElement("tr",{className:"content"},u.a.createElement(ee,null)):(console.log("heroes :>> ",p),u.a.createElement(u.a.Fragment,null,p.map((function(e,t){return u.a.createElement("tr",{key:e._id},u.a.createElement("td",null,t+1),u.a.createElement("td",null,e.name),u.a.createElement("td",null,e.creatorMail),u.a.createElement("td",null,new Date(e.creationDate).toLocaleDateString()),u.a.createElement("td",null,e.trees?e.trees.length:"No trees"))})))),u.a.createElement("tr",{className:"new-hero"},u.a.createElement("td",null,"Add new"),u.a.createElement("td",null,u.a.createElement("input",{type:"text",onChange:function(e){return E(e.target.value)}})),u.a.createElement("td",null,localStorage.getItem("email")),u.a.createElement("td",null,(new Date).toLocaleDateString()),u.a.createElement("td",null,u.a.createElement("button",{onClick:function(e){w.heroes.addOne({name:b}).then((function(e){w.heroes.expose(e._id),n("/ability-tree-creator/hero")})).catch((function(e){console.log("er :>> ",e)}))}},"+"))))))}),ie=(r(72),function(e){Object(C.a)(r,e);var t=Object(I.a)(r);function r(){return Object(N.a)(this,r),t.apply(this,arguments)}return Object(S.a)(r,[{key:"render",value:function(){return u.a.createElement("div",{className:"app"},u.a.createElement(U,null),u.a.createElement(Y,null),u.a.createElement(D.d,null,u.a.createElement(D.b,{path:"/ability-tree-creator/login",component:ne}),u.a.createElement(D.b,{path:"/ability-tree-creator/register",component:le}),u.a.createElement(D.b,{path:"/",component:se})),u.a.createElement(q,null))}}]),r}(u.a.Component));i.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(m.a,null,u.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.96d27fbc.chunk.js.map