(this["webpackJsonpability-tree-creator"]=this["webpackJsonpability-tree-creator"]||[]).push([[0],{33:function(e,t,n){},35:function(e,t,n){e.exports=n.p+"static/media/logo.a2770e0b.png"},40:function(e,t,n){e.exports=n(79)},45:function(e,t,n){},51:function(e,t,n){},70:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"login",(function(){return T})),n.d(a,"register",(function(){return W}));var r={};n.r(r),n.d(r,"show",(function(){return z})),n.d(r,"hide",(function(){return K}));var c={};n.r(c),n.d(c,"getList",(function(){return $})),n.d(c,"getOne",(function(){return G})),n.d(c,"addOne",(function(){return Q})),n.d(c,"deleteOne",(function(){return V}));var o={};n.r(o),n.d(o,"getOne",(function(){return X})),n.d(o,"getAll",(function(){return Y})),n.d(o,"addOne",(function(){return Z})),n.d(o,"deleteOne",(function(){return ee}));var l={};n.r(l),n.d(l,"error",(function(){return r})),n.d(l,"userDetails",(function(){return a})),n.d(l,"heroes",(function(){return c})),n.d(l,"trees",(function(){return o}));var u=n(0),s=n.n(u),i=n(34),m=n.n(i),p=n(9);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d,f,h,b,E,v,g,w,O,x,j,y,k,N,S=n(15),C=n(16),I=n(19),D=n(18),U=n(4),L=(n(45),n(35)),M=n.n(L),q=function(e){Object(I.a)(n,e);var t=Object(D.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){return s.a.createElement("nav",null,s.a.createElement("div",null,s.a.createElement(p.b,{to:"/ability-tree-creator"},s.a.createElement("img",{className:"logo",src:M.a,alt:"D I A B L O"}))),s.a.createElement("div",{className:"account"},s.a.createElement(p.b,{to:"/ability-tree-creator/login"},"Login")))}}]),n}(s.a.Component),_=(n(51),function(){return s.a.createElement("footer",null,s.a.createElement("div",{className:"white-opacity"},"Pawe\u0142 Kowaclzuk 2020 | version: 1.0.0"))}),A=n(2),F=n(38),P=n(1),R=n.n(P),B=n(3),J=n(37),H=n.n(J).a.create({baseURL:"https://ability-tree-api-pk2020.herokuapp.com/api",headers:{"Content-Type":"application/json"}}),T=function(){var e=Object(B.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.post("/login",n).then((function(e){var a=e.headers["x-auth-token"];return localStorage.setItem("token",a),localStorage.setItem("email",n.email),t.setState({token:a}),e.status})).catch((function(e){console.error(e),e.response?t.actions.error.show("Could not login. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server.")})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(B.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.post("/register",n).then(function(){var e=Object(B.a)(R.a.mark((function e(a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,n);case 2:return e.abrupt("return",a.status);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),e.response?t.actions.error.show("Could not register. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server.")})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(e,t){e.setState({error:{display:"block",message:t}})},K=function(e){e.setState({error:{display:"none",message:void 0}})},$=function(){var e=Object(B.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.get("/heroes",{headers:{"x-auth-token":localStorage.getItem("token")}}).then((function(e){return e})).catch((function(e){return console.error(e),e.response?t.actions.error.show("Could not get list of heroes. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server."),e.response})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(B.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.get("/heroes/".concat(n),{headers:{"x-auth-token":localStorage.getItem("token")}}).then(function(){var e=Object(B.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),e.response?t.actions.error.show("Could not get a hero. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server.")})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(B.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.post("/heroes",n,{headers:{"x-auth-token":localStorage.getItem("token")}}).then(function(){var e=Object(B.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),e.response?t.actions.error.show("Could not post a hero. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server.")})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(B.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.delete("/heroes/".concat(n),{headers:{"x-auth-token":localStorage.getItem("token")}}).then(function(){var e=Object(B.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),e.response?t.actions.error.show("Could not get a hero. ".concat(e.response.data)):t.actions.error.show("Unexpexted error with request to the server.")})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(e,t){return H.get("/trees/".concat(t),{headers:{"x-auth-token":localStorage.getItem("token")}}).then((function(e){return e})).catch((function(t){console.error(t),t.response?e.actions.error.show("Could not get a hero. ".concat(t.response.data)):e.actions.error.show("Unexpexted error with request to the server.")}))},Y=function(){var e=Object(B.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(n.map((function(e){return X(t,e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(e,t,n){return H.post("/trees",t,{headers:{"x-auth-token":localStorage.getItem("token")},params:{heroId:n}}).then((function(e){return e})).catch((function(t){console.error(t),t.response?e.actions.error.show("Could not post a hero. ".concat(t.response.data)):e.actions.error.show("Unexpexted error with request to the server.")}))},ee=function(e,t){return H.delete("/trees/".concat(t),{headers:{"x-auth-token":localStorage.getItem("token")}}).then((function(e){return e})).catch((function(t){console.error(t),t.response?e.actions.error.show("Could not get a hero. ".concat(t.response.data)):e.actions.error.show("Unexpexted error with request to the server.")}))},te={token:void 0,error:{display:"none",message:void 0},exposedHero:{name:"",_id:void 0}},ne=Object(F.a)(s.a,te,l),ae=(n(70),function(){var e=ne(),t=Object(A.a)(e,2),n=t[0],a=t[1],r={display:n.error.display};return s.a.createElement("div",{className:"error",style:r},s.a.createElement("p",null,n.error.message),s.a.createElement("br",null),s.a.createElement("button",{onClick:a.error.hide},"Hide"))}),re=n(10),ce=(n(73),function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"box upper box1"}),s.a.createElement("div",{className:"box upper box2"}),s.a.createElement("div",{className:"box bottom box3"}),s.a.createElement("div",{className:"box bottom box4"}))}),oe=(n(33),!1),le=!1,ue=function(){var e=Object(u.useState)(),t=Object(A.a)(e,2);d=t[0],f=t[1];var n=Object(u.useState)(),a=Object(A.a)(n,2);h=a[0],b=a[1];var r=Object(re.useStateIfMounted)(),c=Object(A.a)(r,2);oe=c[0],E=c[1];var o=Object(re.useStateIfMounted)(),l=Object(A.a)(o,2);le=l[0],v=l[1];var i=ne(),m=Object(A.a)(i,2);return m[0],g=m[1],oe?s.a.createElement("div",null,s.a.createElement(U.a,{to:"/ability-tree-creator/".concat(oe)})):le?s.a.createElement("div",{className:"content"},s.a.createElement(ce,null)):s.a.createElement("div",{className:"content"},s.a.createElement("h2",{className:"row"},"Login"),s.a.createElement("form",{className:"row",onSubmit:se},s.a.createElement("label",{className:"row"},"Email: ",s.a.createElement("br",null),s.a.createElement("input",{type:"email",placeholder:"example@xd.com",onChange:function(e){return f(e.target.value)}})),s.a.createElement("label",{className:"row"},"Password: ",s.a.createElement("br",null),s.a.createElement("input",{type:"password",placeholder:"********",onChange:function(e){return b(e.target.value)}})),s.a.createElement("input",{type:"submit",value:"Login"})),s.a.createElement(p.b,{to:"/ability-tree-creator/register",className:"row"},s.a.createElement("div",null,"Register instead")))},se=function(){var e=Object(B.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),v(!0),g.userDetails.login({email:d,password:h}).then((function(e){e>=200&&e<300&&E("/ability-tree-creator")})).finally((function(){v(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=!1,me=!1,pe=function(){var e=Object(u.useState)(),t=Object(A.a)(e,2);w=t[0],O=t[1];var n=Object(u.useState)(),a=Object(A.a)(n,2);x=a[0],j=a[1];var r=Object(re.useStateIfMounted)(),c=Object(A.a)(r,2);ie=c[0],y=c[1];var o=Object(re.useStateIfMounted)(),l=Object(A.a)(o,2);me=l[0],k=l[1];var i=ne(),m=Object(A.a)(i,2);return m[0],N=m[1],ie?s.a.createElement("div",null,s.a.createElement(U.a,{to:"/ability-tree-creator/".concat(ie)})):me?s.a.createElement("div",{className:"content"},s.a.createElement(ce,null)):s.a.createElement("div",{className:"content"},s.a.createElement("h2",{className:"row"},"Register"),s.a.createElement("form",{className:"row",onSubmit:de},s.a.createElement("label",{className:"row"},"Email: ",s.a.createElement("br",null),s.a.createElement("input",{type:"email",placeholder:"example@xd.com",onChange:function(e){return O(e.target.value)}})),s.a.createElement("label",{className:"row"},"Password: ",s.a.createElement("br",null),s.a.createElement("input",{type:"password",placeholder:"********",onChange:function(e){return j(e.target.value)}})),s.a.createElement("input",{type:"submit",value:"Register"})),s.a.createElement(p.b,{to:"/ability-tree-creator/login",className:"row"},s.a.createElement("div",null,"Login instead")))},de=function(e){e.preventDefault(),k(!0),N.userDetails.register({email:w,password:x}).then((function(e){e>=200&&e<300&&y("/ability-tree-creator")})).finally((function(){k(!1)}))},fe=(n(74),function(){return s.a.createElement("td",{className:"container"},s.a.createElement("span",{className:"box upper box1"}),s.a.createElement("span",{className:"box upper box2"}),s.a.createElement("span",{className:"box bottom box3"}),s.a.createElement("span",{className:"box bottom box4"}))}),he=(n(75),function(e){var t=Object(re.useStateIfMounted)(!1),n=Object(A.a)(t,2),a=n[0],r=n[1],c=Object(re.useStateIfMounted)(!0),o=Object(A.a)(c,2),l=o[0],i=o[1],m=Object(u.useState)([]),p=Object(A.a)(m,2),d=p[0],f=p[1],h=Object(u.useState)(),b=Object(A.a)(h,2),E=b[0],v=b[1],g=ne(),w=Object(A.a)(g,2),O=(w[0],w[1]),x=function(){var e=Object(B.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,O.heroes.getList();case 3:if(401!==(null===(t=e.sent)||void 0===t?void 0:t.status)){e.next=8;break}return e.abrupt("return",r("login"));case 8:(null===t||void 0===t?void 0:t.status)<300&&f(t.data);case 9:i(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){x()}),[]);return s.a.createElement("div",{className:"heroes"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Number"),s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Creator"),s.a.createElement("th",null,"Creation date"),s.a.createElement("th",null,"Trees"))),s.a.createElement("tbody",null,a?s.a.createElement(s.a.Fragment,null,s.a.createElement(U.a,{to:"ability-tree-creator/".concat(a)})):l?s.a.createElement("tr",{className:"content"},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement(fe,null),s.a.createElement("td",null),s.a.createElement("td",null)):s.a.createElement(s.a.Fragment,null,d.map((function(e,t){return s.a.createElement("tr",{key:e._id,onClick:function(t){return r("hero/".concat(e._id))}},s.a.createElement("td",null,t+1),s.a.createElement("td",null,e.name),s.a.createElement("td",null,e.creatorMail),s.a.createElement("td",null,new Date(e.creationDate).toLocaleDateString()),s.a.createElement("td",null,e.trees?e.trees.length:"No trees"))}))),s.a.createElement("tr",{className:"new-hero"},s.a.createElement("td",null,"Add new"),s.a.createElement("td",null,s.a.createElement("input",{type:"text",onChange:function(e){return v(e.target.value)}})),s.a.createElement("td",null,localStorage.getItem("email")),s.a.createElement("td",null,(new Date).toLocaleDateString()),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(e){O.heroes.addOne({name:E}).then((function(e){r("hero/".concat(e._id))})).catch((function(e){console.log("er :>> ",e)}))}},"+"))))))}),be=(n(76),n(39)),Ee=(n(77),function(e){var t=Object(u.useState)(e.trees),n=Object(A.a)(t,2),a=n[0],r=n[1],c=Object(u.useState)([]),o=Object(A.a)(c,2),l=o[0],i=o[1],m=Object(u.useState)("loader"),p=Object(A.a)(m,2),d=p[0],f=p[1],h=Object(u.useState)(),b=Object(A.a)(h,2),E=b[0],v=b[1],g=Object(u.useState)(),w=Object(A.a)(g,2),O=w[0],x=w[1],j=ne(),y=Object(A.a)(j,2),k=(y[0],y[1]),N=function(){var e=Object(B.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.length){e.next=4;break}f("new"),e.next=9;break;case 4:return e.next=6,k.trees.getAll(a);case 6:t=e.sent,i(t.map((function(e){return e.data}))),f(a.length-1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){N()}),[a]);var S=function(){f("loader"),k.trees.addOne({name:E,imgUrl:O},e.heroId).then((function(e){var t=e.data._id;r([].concat(Object(be.a)(a),[t]))})).catch((function(){f("new")}))};return s.a.createElement("div",{className:"tree"},s.a.createElement("div",{className:"preview"},s.a.createElement(s.a.Fragment,null,l.map((function(e,t){return s.a.createElement("div",{className:"thumbnail",key:e._id,onClick:function(){return f(t)}},s.a.createElement("img",{src:e.imgUrl,alt:""})," ",s.a.createElement("br",null),s.a.createElement("p",null,e.name))}))),s.a.createElement("button",{className:"new-tree",onClick:function(){return f("new")}},"+")),s.a.createElement("div",{className:"board"},"loader"===d?s.a.createElement(ce,null):"new"===d?s.a.createElement("form",{onSubmit:S},s.a.createElement("label",null,"Name ",s.a.createElement("input",{type:"text",name:"name",onChange:function(e){return v(e.target.value)}})),s.a.createElement("label",null,"Picture URL ",s.a.createElement("input",{type:"text",name:"imgUrl",onChange:function(e){return x(e.target.value)}})),s.a.createElement("input",{type:"submit",value:"Create new ability tree"})):s.a.createElement("div",{className:"abilities"},"Abilities of ",JSON.stringify(l[d]))))}),ve=function(e){var t=Object(re.useStateIfMounted)(!1),n=Object(A.a)(t,2),a=n[0],r=n[1],c=Object(re.useStateIfMounted)(!0),o=Object(A.a)(c,2),l=o[0],i=o[1],m=Object(u.useState)([]),p=Object(A.a)(m,2),d=p[0],f=p[1],h=ne(),b=Object(A.a)(h,2),E=(b[0],b[1]),v=function(){var t=Object(B.a)(R.a.mark((function t(){var n;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,E.heroes.getOne(e.match.params.id);case 3:401===(null===(n=t.sent)||void 0===n?void 0:n.status)?r("login"):(null===n||void 0===n?void 0:n.status)<300&&(null===n||void 0===n?void 0:n.status)>=200?f(n.data):r(""),i(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(u.useEffect)((function(){v()}),[]);var g=function(){var e=Object(B.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.disabled=!0,e.next=3,E.heroes.deleteOne(d._id);case 3:200===(null===(n=e.sent)||void 0===n?void 0:n.status)&&r("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"hero-details"},a?s.a.createElement(s.a.Fragment,null,s.a.createElement(U.a,{to:"ability-tree-creator/".concat(a)})):l?s.a.createElement("div",{className:"content"},s.a.createElement(ce,null)):s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,d.name),s.a.createElement("div",null,s.a.createElement("span",null,"Creator: "),s.a.createElement("span",null,d.creatorMail)),s.a.createElement("div",null,s.a.createElement("span",null,"Creation Date: "),s.a.createElement("span",null,new Date(d.creationDate).toLocaleDateString())),s.a.createElement("button",{className:"removeBtn",onClick:g},"Delete"),s.a.createElement(Ee,{trees:d.trees||[],heroId:d._id})))},ge=(n(78),function(e){Object(I.a)(n,e);var t=Object(D.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"app"},s.a.createElement(q,null),s.a.createElement(ae,null),s.a.createElement(U.d,null,s.a.createElement(U.b,{exact:!0,path:"/ability-tree-creator/login",component:ue}),s.a.createElement(U.b,{exact:!0,path:"/ability-tree-creator/register",component:pe}),s.a.createElement(U.b,{exact:!0,path:"/ability-tree-creator/hero/:id",component:ve}),s.a.createElement(U.b,{exact:!0,path:"/ability-tree-creator",component:he}),s.a.createElement(U.b,{path:"/"},s.a.createElement(U.a,{to:"/ability-tree-creator"}))),s.a.createElement(_,null))}}]),n}(s.a.Component));m.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(p.a,null,s.a.createElement(ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.a22e772c.chunk.js.map